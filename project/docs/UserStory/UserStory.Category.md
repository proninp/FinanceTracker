# User Story: Категории

Как пользователь, я хочу управлять своими категориями (создавать, редактировать, удалять, визуально различать), чтобы эффективно классифицировать и анализировать свои финансовые операции.

---

## User Story 1: Просмотр списка категорий

Как пользователь, я хочу видеть список всех категорий, разделённых по типам (доходы и расходы), чтобы быстро выбрать нужную категорию при создании транзакции.

**Acceptance Criteria:**

- Категории отображаются общим списком в алфавитном порядке.
- Подкатегории внутри категории также отображаются в алфавитном порядке.
- Для каждой категории отображаются:
  - иконка (если есть, иначе первые два непробельных символа названия категории);
  - название.
- Поддерживается вложенность категорий (например, «Транспорт» → «Такси», «Метро»).
- Пользователь может использовать поиск по названию категории.

**Business Value:**
Ускоряет создание транзакций и повышает удобство работы с приложением.

---

## User Story 2: Создание новой категории

Как пользователь, я хочу создать новую категорию с указанием типа (доход, расход или обе), чтобы гибко классифицировать свои транзакции.

**Acceptance Criteria:**

- Пользователь может указать:
  - Название категории (обязательно);
  - Тип категории: Доход, Расход, Обе;
  - Родительскую категорию (для вложенной структуры);
  - Иконку (по желанию: из предустановленного набора или выбрать свою);
  - Цвет категории (по желанию).
- Если выбрана категория с типом «Обе», она доступна и в доходах, и в расходах.
- После сохранения категория немедленно появляется в списке соответствующего типа.
- Дубликаты названий (в пределах одного типа) не допускаются.
- Новая категория сохраняется в пользовательском профиле и синхронизируется при входе на других устройствах.

**Business Value:**  
Позволяет пользователю адаптировать структуру категорий под индивидуальные привычки и типы доходов/расходов.

---

## User Story 3: Редактирование категории

Как пользователь, я хочу изменить название, иконку или тип категории, чтобы уточнить назначение категории или скорректировать её визуальное отображение.

**Acceptance Criteria:**

- Пользователь может редактировать:
  - Название категории;
  - Иконку;
  - Родительскую категорию.
- Все операции, ранее связанные с категорией, сохраняют привязку.
- Изменения отображаются во всех местах приложения (например, в отчётах и при выборе категорий).

**Business Value:**  
Позволяет корректировать структуру категорий без потери данных и поддерживать порядок.

---

## User Story 4: Удаление категории

Как пользователь, я хочу удалить неиспользуемую категорию, чтобы упростить список и убрать ненужные пункты.

**Acceptance Criteria:**

- При удалении категории отображается подтверждение.
- Если к категории привязаны операции:
  - Пользователь получает предложение переназначить их на другую категорию;
  - Или удалить категорию без изменения прошлых операций (с пометкой «архивная»).
- После удаления категория исчезает из списка и становится недоступной для новых транзакций.
- Удалённая категория сохраняется в истории для корректности старых отчётов (soft delete).

**Business Value:**  
Поддерживает порядок в структуре категорий, не нарушая аналитическую целостность данных.

---

## User Story 5: Визуальное отображение и иконки категорий

Как пользователь, я хочу видеть названия, иконки и цвета категорий, чтобы быстрее находить нужные категории визуально при добавлении операций.

**Acceptance Criteria:**

- Каждая категория может иметь иконку и цвет (по умолчанию или выбранный пользователем).
- Иконки отображаются:
  - в списке категорий;
  - в форме выбора категории при создании и редактировании операции;
  - в аналитических графиках и диаграммах.
- При отображении в списке категорий применяется сортировка по названию категории в алфавитном порядке.
- При отображении списка категорий при создании/изменении операции применяется сортировка по наиболее часто используемым категориям в порядке убывания частоты использования.  
- Система предлагает библиотеку стандартных иконок (например, еда, транспорт, жильё и т. д.).

**Business Value:**  
Улучшает пользовательский опыт за счёт визуальной дифференциации категорий и повышает скорость навигации.

---

## User Story 6: Предустановленные категории

Как новый пользователь, я хочу видеть набор предустановленных категорий, чтобы сразу начать пользоваться приложением без долгой настройки.

**Acceptance Criteria:**

- После первого Log in'а для каждого пользователя создаются стандартные категории доходов и расходов (еда, транспорт, зарплата и т. д.).
- Пользователь может их редактировать или удалять.

**Business Value:**  
Ускоряет старт и снижает барьер входа в приложение.
